<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="canonical" href="https://www.thanassis.space/trimesh.html">
<meta name="author" content="Thanassis Tsiodras">
<meta name="author" content="Athanasios Tsiodras">
<meta name="author" content="ttsiod">
<meta name="author" content="ttsiodras">
<link type="text/css" rel="stylesheet" href="final-code-wavetheory-lightbox.css">
<link rel="stylesheet" type="text/css" href="asciinema-player.css">
<link type="application/rss+xml" rel="alternate" href="rss.xml" title="Coding and administration articles by ttsiodras">
<script type="text/javascript" src="prototype.js"></script>
<script type="text/javascript" src="scriptaculous.js?load=effects,builder"></script>
<script type="text/javascript" src="lightbox.js"></script>
<title>renderer 2.0 OpenGL - GPUs put to work</title>
</head>
<body>
    <div class="well" id="Page">
        <div id="Banner">renderer 2.0 OpenGL - GPUs put to work</div>
        <div id="MainContent">
            <a href="//www.reddit.com/r/programming/submit" onclick="window.location = window.location.protocol + '//www.reddit.com/r/programming/submit?url=' + encodeURIComponent(window.location); return false"> <img src="spreddit7.gif" alt="submit to programming reddit" border="0"> </a>
            <br>&nbsp;<br>
              <em>(May 2005)</em><p>
  This is the OpenGL version of my <a href="renderer.html">3D renderer</a>.
  <div class="rightFloat scrollableContainer">
  <img hspace="10" vspace="10" alt="Rendered statue" src="opengl-statue.jpg">
  </div>

  <p>In essence, it is a straightforward implementation of the core principles
  of "polygon related" graphics theory. The source code includes:
  <ul>
  <li>Loading of 3D models (.ply files as generated by 
  <a href="http://ostatic.com/shadevis">shadevis</a>).
  <li>Point rendering
  <li>Wire-frame rendering
  <li>Gouraud-shaded rendering with ambient occlusion color per triangle
  <li>Per-pixel Phong shading with per-pixel interpolated ambient occlusion
  <li>Portable display and keyboard handling through libSDL.
  </ul>
  The code is available under the GNU license.
  It is using the autotools, so it compiles and runs cleanly under most 
  platforms (tested so far on Linux/x86, Mac OS/X, Windows (using MinGW gcc), 
  OpenBSD/amd64 and FreeBSD/amd64).<p>

  Unlike the corresponding <a href="renderer.html">pure-software implementation</a>,
  these sources use OpenGL 
  to do the rendering. In fact, they use fragment shaders and Vertex 
  Buffer Objects (VBO) to perform all the graphics calculations in hardware
  (if supported by your card). A 70$ graphics card (an ATI 4670) provides around 
  100 million phong shaded triangles per second with this renderer.

  <p><b>Download, compile and run</b></p>

  The <a href="renderer-opengl-2.0e.tar.bz2">Source code</a> is available under the GPL.
  <a href="renderer-opengl-2.0d_mingw32_bin.7z">Win32 binaries</a> are also 
  available (compiled with MinGW).<p>

  Compilation follows the well known procedure... 
  <pre>
  <b>bash$</b> ./configure
  <b>bash$</b> make</pre>

  After a successful make, you can then watch the packaged 3D objects:
  <pre>
  <b>bash$</b> cd 3D-objects
  <b>bash$</b> ../src/renderer/renderer statue.ply
  </pre>
  To navigate...
  <ul>
  <li>R toggles autospin.
  <li>Fly around with the cursor keys,A,Z and rotate the light with W. 
  <li>SPACE changes the rendering mode (points - lines - gouraud - phong).
  <li>S,F,E and D are 'strafe' left/right/up/down.
  <li>ESC quits. 
  </ul>
  <tt>statue.ply</tt> is just one of the available objects. Have a look at the 
  others as well. 
  <p><b>Creating more 3D objects on your own</b></p>
  <ol>
  <li>Use <a href="http://meshlab.sourceforge.net/">MeshLab</a> to convert your 3D object to .PLY.
  <li>Load it up in <a href="http://ostatic.com/shadevis">shadevis</a> and hit ENTER 
  to have shadevis calculate the ambient occlusion factors per vertex. After that, 
  hit 'D' as many times as necessary to lower the diffuse light to 0%, and hit 'a' 
  to pump up the ambient to 100%. Hit 'S' to save the object.
  <li>Load the saved '..._vis.ply' with my renderer.
  </ol>
  You can also use the 3D objects from the 
  <a href="renderer.html">pure-software implementation</a>'s package.
  <p><b>Phong shading</b></p>
  Notice that the Phong shading mode is <b>real phong shading</b>, done through
  the vertex and fragment shaders. The vertexes' normal vectors are 
  interpolated per-pixel, and the complete lighting equation is then 
  evaluated. To improve the areas not touched by the light source 
  (the ambient ones), the shaders also interpolate the per-vertex ambient 
  occlusion factor that <a href="http://ostatic.com/shadevis">shadevis</a>
  generates, thus creating radiosity-look-alike renderings.<p>
  Since my renderer uses shaders and vertex buffer objects, rendering
  speed is amazing: my Radeon 4670 draws a huge object I have 
  (1.6 million triangles) at 86 frames per second, for an unbelievable
  134 million phong-shaded triangles per second!
  <p>And just look at the difference between gouraud and phong shading...

  <div class="scrollableContainer">
    <table align="center" summary="Screenshots" border="0">
    <tr>
      <td><img alt="Gouraud shaded image" src="gouraud.png"></td>
      <td><img alt="Phong shaded image" src="phong.png"></td>
    </tr>
    </table>
    <p>
    <em>Phong shading creates much better pictures than Gouraud; especially
    at low tessellations.<br>Notice how the fragment shader creates Phong higlights,
    and also how it<br>interpolates the vertex ambient occlusion factor per-pixel.</em>
  </div>

  Enjoy!
<br>
    <hr>
    <div style='margin-top:1em'>
        <div style='float:left'>
            <a target="_blank" href="https://stackoverflow.com/users/382050/ttsiodras">
                <img src="382050.png" width="208" height="58" alt="profile for ttsiodras at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for ttsiodras at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
            </a>
        </div>
        <div style='float:left; margin-left:1em'>
            <a target="_blank" href="https://github.com/ttsiodras">
                <img border="1" src="github.png" alt='GitHub member ttsiodras' title='GitHub member ttsiodras'>
            </a>
        </div>
        <!--div style='float:left; margin-left:1em'>
            <a target="_blank" href="https://projecteuler.net/profile/ttsiodras.png">
                <img src="https://projecteuler.net/profile/ttsiodras.png" alt='Project Euler member ttsiodras' title='Project Euler member ttsiodras'>
            </a>
        </div-->
    </div>
    <div style='clear:both; margin-bottom:0.5em'></div>

<!-- Used to do this with float:right, but Opera Mini shows nothing with it... back to tables :-( -->
<table summary="Footer" width="100%" border="0"><tr><td><a href="index.html">Back to index</a>&nbsp;&nbsp;<a href="cv.pdf">My CV</a>&nbsp;&nbsp;<a href="https://plus.google.com/+ThanassisTsiodras/about">About me</a></td><td align="right"><em>Last update on: Sat Feb 27 01:41:47 2016</em>&nbsp;(<a href="//validator.w3.org/check?uri=referer"><em>Valid HTML</em></a>)</td></tr></table>

            <hr style="margin-bottom: 1em">
            <script src="urchin.js" type="text/javascript"></script>
            <script type="text/javascript">_uacct = "UA-746316-1";urchinTracker();</script>
            <p id="disqus_thread">
                The comments on this website require the use of JavaScript. Perhaps your browser isn't
                JavaScript capable or the script is not being run for another reason. If you're
                interested in reading the comments or leaving a comment behind please try again with a
                different browser or from a different connection.
            </p>
            <script type="text/javascript">
                /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                var disqus_shortname = 'ttsiodras';
                var disqus_identifier = '../content/trimesh.content';

                (function() {
                    'use strict';

                    /**
                     * This method will handle the click on the button to load the comments. It will remove the
                     * button and execute the original Disqus script for loading the comments.
                     */
                    function button_clickHandler(event) {
                        // We need to get the button element, we could also use the target property of the event
                        // but this will do just as well
                        var button = document.getElementById('disqus_thread');
                        // Now we will have to recreate the div element we removed from the HTML. We will place
                        // it into the DOM like we did when we created the button
                        var disqusContainer = document.createElement('div');
                        button.parentNode.insertBefore(disqusContainer, button);
                        button.parentNode.removeChild(button);

                        // The div element will need to have the disqus_thread id as this is required for Disqus,
                        // it is the way their code identifies the element in which the comments can be displayed
                        disqusContainer.id = 'disqus_thread';

                        // Now we can execute the original Disqus code
                        var dsq = document.createElement('script');
                        dsq.type = 'text/javascript';
                        dsq.async = true;
                        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    }

                    /**
                     * This method will initialize the module. It will replace the JavaScript dependency message
                     * with a button which will allow the visitor to load the comments.
                     */
                    function init() {
                        // Try to get the element we used to display the message about the JavaScript dependency
                        var placeholder = document.getElementById('disqus_thread');
                        // If we didn't get the placeholder element we will stop setting up the button to load
                        // the comments
                        if (placeholder == null) {
                            return;
                        }

                        // The placeholder was found, now we can create the button which will allow the visitor to
                        // load the comments
                        var button = document.createElement('button');
                        button.appendChild(document.createTextNode('Click here to see the comments (powered by Disqus)'));
                        button.addEventListener('click', button_clickHandler.bind(this));

                        // We will insert the button before the placeholder and once the button has been placed in
                        // the DOM we will remove the placeholder
                        placeholder.parentNode.insertBefore(button, placeholder);
                        placeholder.parentNode.removeChild(placeholder);

                        // The placeholder used to have the id which can be reference by an anchor element, to make
                        // sure we don't break this functionality we will apply the id to our newly created button
                        button.id = 'disqus_thread';
                    }

                    // Setup the module
                    init();
                })();
            </script>
        </div>
    </div>
</body>
</html>
