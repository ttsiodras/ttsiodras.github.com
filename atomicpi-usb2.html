<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="canonical" href="https://www.thanassis.space/atomicpi-usb2.html">
<meta name="author" content="Thanassis Tsiodras">
<meta name="author" content="Athanasios Tsiodras">
<meta name="author" content="ttsiod">
<meta name="author" content="ttsiodras">
<link type="text/css" rel="stylesheet" href="final-code-wavetheory-lightbox.css">
<link type="application/rss+xml" rel="alternate" href="rss.xml" title="Coding and administration articles by ttsiodras">
<script type="text/javascript" src="prototype.js"></script>
<script type="text/javascript" src="scriptaculous.js?load=effects,builder"></script>
<script type="text/javascript" src="lightbox.js"></script>
<title>A USB2.0 adapter and a 3D-printed enclosure for my AtomicPI</title>
</head>
<body>
    <div class="well" id="Page">
        <div id="Banner">A USB2.0 adapter and a 3D-printed enclosure for my AtomicPI</div>
        <div id="MainContent">
            <a href="https://www.reddit.com/r/programming/submit" onclick="window.location = window.location.protocol + '//www.reddit.com/r/programming/submit?url=' + encodeURIComponent(window.location); return false"> <img src="spreddit7.gif" width="75" height="17" alt="submit to programming reddit" border="0"> </a>
            <br>&nbsp;<br>
            <p><em>(January 2021)</em></p>

<h1>USB2.0 adapter and 3D-printed enclosure (AtomicPI)</h1>

<p><a href="https://github.com/ttsiodras/AtomicPI-3D-printed-enclosure"><img src="forkme_right_darkblue_121621.png" style="position: fixed; right: 0; top: 0;" alt="Fork me on GitHub"></a></p>

<div class="tldr">
<b>TL;DR:</b> I used some cheap components to create a USB 2.0 port for my Atomic PI...
<div style="clear:both; text-align:center; margin: 2em 0em 2em 0em">
<img src="atomicpi-TLDR.webp" alt="Final form."><p>
</div>

<p>...and then I used OpenSCAD to design and 3D-print an enclosure.
<p>
My previous articles on this excellent 35$ SBC:</p>

<ul>
<li>Powering it up with a <a target="_blank" href="atomicpi.html">custom adapter of my own making</a>
<li><a target="_blank" href="remotepower.html">Using an ESP01/relay module</a> to remotely power on/off my AtomicPI and interact with its serial port.
</ul>

<p></div>
&nbsp;<p>
&nbsp;<p>
I love my AtomicPI :-)<p>
<a target="_blank" href="atomicpi.html">I built it up 20 months ago</a>, giving it a proper power adapter/switch, and setting it up for <a target="_blank" href="remotepower.html">remote power/remote serial port via an ESP01</a>. It has served me well in many, many ways - the most important of which is as a ZFS server with two external USB drives.</p>

<div style="clear:both; text-align:center; margin: 2em 0em 2em 0em">
<a href="front-off-hi.jpg" rel="lightbox" title="The old form"><img src="front-off-hi.jpg" alt="The old form"></a>
<p>
<em>The old form</em>
</div>

<p>Back in 2019, I wanted to use the additional USB port "hiding" in the webcam. And being eager to do it, I didn't order any components/connectors - I just reused a female USB breakout board I had, and directly soldered it on the webcam pins of the PI <em>(as shown in the photo above - from right to left, skip one pin (GND), then VCC, D-, D+, GND)</em>.</p>

<p>I also hot-glued after soldering - for extra stability! :-)<p></p>

<p>What can I say? I <b>enjoy</b> hacking things.</p>

<p>You may be doubting this setup - but you shouldn't. It has performed its duties as a ZFS server for a year and a half, with zero issues. ZFS periodically scrubs the mirrored pool, formed from two external 2TB drives - one accessed over USB3, the other over my custom USB2 port. Any issues with cabling/noise would have surfaced by now - there were none.</p>

<h2>3D-printing an enclosure? A better USB port first!</h2>

<p>So... This past Xmas, I rewarded myself with an Ender V2 3D printer. I am a tinkerer by nature, so I felt it was high time I jump on this hobby too.</p>

<p>And what better way to start, than by building an enclosure for my Atomic PI!</p>

<p>But before I get to that point, I obviously have to implement a better solution for the USB2.0 port...<br>
I can't have it dangling off the side :-)</p>

<p>So I made an order from a German shop in e-Bay:</p>

<ul>
<li>4X USB-A-S-RA Buchse USB A THT mit 90Â°-Winkel USB 2.0 vergoldet ADAM TECH</li>
<li>8X PAP-05V-S Stecker Leitung-Platte weiblich PA 2mm PIN: 5 kontaktlos 3A JST</li>
<li>32X SPHD-001T-P0.5 Kontakt weiblich 0,13-0,33mm2 26AWG-22AWG PA,PBV,PHD 3A 2mm</li>
</ul>

<p><em>(The eBay shop I used - in case anyone else wants to reproduce my steps - was "chipmarktgmbh")</em>.</p>

<p>The ingredients arrived 10 days later - so...</p>

<p><strong>Step 1</strong>:</p>

<p>Crimping solid core wires into the contacts, and inserting them inside the connector...</p>

<p>I don't have a crimper, so this was a bit of an exercise in patience :-)</p>

<div style="clear:both; text-align:center; margin: 2em 0em 2em 0em">
<img src="atomicpi-crimping.jpg" alt="Crimping..."><p>
<em>Crimping...<br>
From left to right: VCC, D-, D+, GND
</em>
</div>

<p><strong>Step 2</strong>:</p>

<p>Cut a piece of perfboard that will perfectly fit alongside the big heatsink - and solder the USB port on it.
Also, enlarge the corner hole to accomodate a PCB standoff - which will allow a much more solid attachment of this 'adapter' board on the motherboard.</p>

<div style="clear:both; text-align:center; margin: 2em 0em 2em 0em">
<img src="atomicpi-perfboard.jpg" alt="Female USB port on perfboard - placed, not soldered yet"><p>
<em>Female USB port on perfboard - placed, not soldered yet</em>
</div>

<p><strong>Step 3</strong>:</p>

<p>Assemble the pieces, and mold the solid-core wires to properly place the connector - so that it will match with the webcam port:</p>

<div style="clear:both; text-align:center; margin: 2em 0em 2em 0em">
<img src="atomicpi-assembly1.jpg" alt="Assembly, side 1"><p>
<em>Assembly, side 1</em>
</div>

<div style="clear:both; text-align:center; margin: 2em 0em 2em 0em">
<img src="atomicpi-assembly2.jpg" alt="Assembly, side 2"><p>
<em>Assembly, side 2</em>
</div>

<p><strong>Step 4</strong>:</p>

<p>Add a bit of hot glue, for even more stability... and plug it in!</p>

<div style="clear:both; text-align:center; margin: 2em 0em 2em 0em">
<img src="atomicpi-usb2-1.jpg" alt="Final product, pic 1"><p>
</div>

<div style="clear:both; text-align:center; margin: 2em 0em 2em 0em">
<img src="atomicpi-usb2-2.jpg" alt="Final product, pic 2"><p>
</div>

<div style="clear:both; text-align:center; margin: 2em 0em 2em 0em">
<img src="atomicpi-usb2-3.jpg" alt="Final product, pic 3"><p>
</div>

<h2>USB port stress test with ZFS</h2>

<p>OK - so the new USB port now "lives" inside the body area of the motherboard.
It's also quite solidly attached <em>(with the PCB standoff on one side, and the JST connector on the other)</em></p>

<p>Time to test it, with a ZFS scrub on my 2TB ZFS pool...</p>

<p>...a test that it passed with flying colors.</p>

<p>So the new port works just as well as the port it replaced...<br>
And it <em>definitely</em> looks better :-)</p>

<p>I am officially out of excuses now - I have to learn OpenSCAD, and design/print an enclosure... <br>
Here we go!</p>

<h2>Two after-work-evenings later...</h2>

<p>OpenSCAD makes this job so easy! Amazing SW, I love it - feels just like
writing code, with a <em>very</em> visual debugger :-) </p>

<p>This deserves a new blog post. Alas, no time!...  But 
<a href="https://github.com/ttsiodras/AtomicPI-3D-printed-enclosure" target="_blank">you can get the code from here</a>.</p>

<div style="clear:both; text-align:center; margin: 2em 0em 2em 0em">
<picture>
  <source srcset="openscad.webp" type="image/webp">
  <img src="openscad.jpg" alt="On my way to 3D-printing with OpenSCAD"><p>
</picture>
</div>

<h2>And finally...</h2>

<p>One weekend later...</p>

<div style="clear:both; text-align:center; margin: 2em 0em 2em 0em">
<img src="atomicpi-glorious.jpg" alt="Final result"><p>
</div>

<div style="clear:both; text-align:center; margin: 2em 0em 2em 0em">
<img src="atomicpi-final.webp" alt="So much better than before :-)"><p>
</div>

<p>So, so much better :-)</p>

<p>In case you are wondering, the top cover snaps into place, via a dent
<em>(inspiration: <a href="https://www.thingiverse.com/thing:2411898/remixes">Inhumierer (Thingiverse)</a> )</em></p>

<div style="clear:both; text-align:center; margin: 2em 0em 2em 0em">
<img src="atomicpi-cover.jpg" alt="Top-cover"><p>
</div>

<br>
    <hr>
    <div style='margin-top:1em'>
        <div style='float:left'>
            <a target="_blank" href="https://stackoverflow.com/users/382050/ttsiodras">
                <img src="382050.png" width="208" height="58" alt="profile for ttsiodras at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for ttsiodras at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
            </a>
        </div>
        <div style='float:left; margin-left:1em'>
            <a target="_blank" href="https://github.com/ttsiodras">
                <img border="1" src="github.png" alt='GitHub member ttsiodras' title='GitHub member ttsiodras'>
            </a>
        </div>
        <!--div style='float:left; margin-left:1em'>
            <a target="_blank" href="https://projecteuler.net/profile/ttsiodras.png">
                <img src="https://projecteuler.net/profile/ttsiodras.png" alt='Project Euler member ttsiodras' title='Project Euler member ttsiodras'>
            </a>
        </div-->
    </div>
    <div style='clear:both; margin-bottom:0.5em'></div>

<!-- Used to do this with float:right, but Opera Mini shows nothing with it... back to tables :-( -->
<table summary="Footer" width="100%" border="0"><tr><td><a href="index.html">Index</a>&nbsp;&nbsp;<a href="cv.pdf">CV</a></td><td align="right"><em>Updated: Sat Oct 8 20:33:36 2022</em></td></tr></table>

            <hr style="margin-bottom: 1em">
            <p id="disqus_thread">
                The comments on this website require the use of JavaScript. Perhaps your browser isn't
                JavaScript capable or the script is not being run for another reason. If you're
                interested in reading the comments or leaving a comment behind please try again with a
                different browser or from a different connection.
            </p>
            <script type="text/javascript">
                /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                var disqus_shortname = 'ttsiodras';
                var disqus_identifier = '../content/atomicpi-usb2.content';

                (function() {
                    'use strict';

                    /**
                     * This method will handle the click on the button to load the comments. It will remove the
                     * button and execute the original Disqus script for loading the comments.
                     */
                    function button_clickHandler(event) {
                        // We need to get the button element, we could also use the target property of the event
                        // but this will do just as well
                        var button = document.getElementById('disqus_thread');
                        // Now we will have to recreate the div element we removed from the HTML. We will place
                        // it into the DOM like we did when we created the button
                        var disqusContainer = document.createElement('div');
                        button.parentNode.insertBefore(disqusContainer, button);
                        button.parentNode.removeChild(button);

                        // The div element will need to have the disqus_thread id as this is required for Disqus,
                        // it is the way their code identifies the element in which the comments can be displayed
                        disqusContainer.id = 'disqus_thread';

                        // Now we can execute the original Disqus code
                        var dsq = document.createElement('script');
                        dsq.type = 'text/javascript';
                        dsq.async = true;
                        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    }

                    /**
                     * This method will initialize the module. It will replace the JavaScript dependency message
                     * with a button which will allow the visitor to load the comments.
                     */
                    function init() {
                        // Try to get the element we used to display the message about the JavaScript dependency
                        var placeholder = document.getElementById('disqus_thread');
                        // If we didn't get the placeholder element we will stop setting up the button to load
                        // the comments
                        if (placeholder == null) {
                            return;
                        }

                        // The placeholder was found, now we can create the button which will allow the visitor to
                        // load the comments
                        var button = document.createElement('button');
                        button.appendChild(document.createTextNode('Click here to see the comments (powered by Disqus)'));
                        button.addEventListener('click', button_clickHandler.bind(this));

                        // We will insert the button before the placeholder and once the button has been placed in
                        // the DOM we will remove the placeholder
                        placeholder.parentNode.insertBefore(button, placeholder);
                        placeholder.parentNode.removeChild(placeholder);

                        // The placeholder used to have the id which can be reference by an anchor element, to make
                        // sure we don't break this functionality we will apply the id to our newly created button
                        button.id = 'disqus_thread';
                    }

                    // Setup the module
                    init();
                })();
            </script>
        </div>
    </div>
</body>
</html>
